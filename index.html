<!DOCTYPE html>
<html>
<head>

	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style/style.css">
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://jqueryui.com//resources/demos/style.css">
</head>
<body>
	
	<select name="select" id= "currency">
 		<option value="USD">USD</option>
 		<option value="EUR" selected>EUR</option>
 	 	<option value="PLN">PLN</option>
	</select>
	<input type="text" class="datepicker" value="Початкова дата"  id="datepickerStart">
	<input type="text" class="datepicker" value="Кінцева дата" id="datepickerFinish">
	<button onclick="apiRequest()">Знайти</button>
	

</body>


  
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="text/javascript">
$( ".datepicker" ).datepicker();



  function apiRequest() {
  	

var currency = document.getElementById('currency').value;
  	var start = document.getElementById('datepickerStart').value;
  	start = start.split("/");
  	var finish = document.getElementById('datepickerFinish').value;
  	finish = finish.split("/");

  		
  	if(start[1]<finish[1]){
  		for (var i = start[1];i<=finish[1];i++) {
  				var date =(start[2]+''+start[0]+''+i);
  				
  				var url ='https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?valcode='+currency+'&date='+date+'&json';
  				fetch(url)
 				 .then((response) => {
   					 return response.json();
 				 })
  				.then((data) => {
  						
  					 document.write("<br>"+data[0]["exchangedate"]+" "+data[0]["rate"]+" "+data[0]["txt"]+" ");
    				console.log(data[0]["rate"]);
 				 });
  		}
  	}else{
  		var date =(start[2]+''+start[0]+''+start[1]);
  		var url ='https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?valcode=PLN&date='+date+'&json';
  				fetch(url)
 				 .then((response) => {
   					 return response.json();
 				 })
  				.then((data) => {
    				console.log(data[0]["rate"]);
 				 });
  	}
  	

  }




</script>
</html>